#include "Set.h"
#include <iostream>
using namespace std;

int main() {
    setlocale(LC_ALL, "RUS");
    // Контролируемый блок try
    try {
        Set s1(3);  // Множество из 3 элементов
        Set s2;     // Пустое множество
        cout << "Исходное множество s1: " << s1 << endl;

        // Пример работы с оператором индексации
        cout << "Элемент по индексу 1 в s1: " << s1[1] << endl;

        // Попытка доступа к элементу за пределами массива (генерация исключения)
        try {
            cout << s1[3] << endl;  // Это вызовет исключение, так как индекс 3 вне диапазона
        }
        catch (int e) {
            cout << "ОШИБКА: Индекс выходит за пределы!" << endl;
        }

        // Добавление элемента в множество (генерация исключения при переполнении)
        try {
            s1.add(10);
            cout << "После добавления элемента: " << s1 << endl;
        }
        catch (int e) {
            cout << "ОШИБКА: Множество переполнено!" << endl;
        }

        // Операция вычитания множества
        Set result = s1 - s2;
        cout << "Результат операции s1 - s2: " << result << endl;

        // Удаление элемента из множества с помощью оператора --
        cout << "Удаление одного элемента из s1: " << endl;
        --s1;  // Удаляем первый элемент
        cout << s1 << endl;

        // Удаление элемента, когда множество становится пустым
        --s1;  // Удаляем второй элемент
        cout << s1 << endl;
        --s1;
        // Попытка удаления из пустого множества (генерация исключения)
        try {
            --s1;  // Множество пусто, и это вызовет исключение
        }
        catch (int e) {
            cout << "ОШИБКА: Невозможно удалить элемент из пустого множества!" << endl;
        }
    }
    catch (int e) {
        cout << "ОШИБКА: Что-то пошло не так при инициализации множества!" << endl;
    }

    return 0;
}
